<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wine Recommender</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            oldbg: "#0f0b08",
            oldcard: "#13100f",
            gold: "#bfa56a",
            muted: "#9e8f7a",
          },
          fontFamily: { serif: ['Georgia', 'serif'] }
        }
      }
    }
  </script>
</head>
<body class="min-h-screen bg-oldbg text-[#efe7dc] p-6">
  <header class="max-w-6xl mx-auto mb-8">
    <h1 class="text-4xl font-serif tracking-wide text-gold">Wine Recommender</h1>
  </header>
  <section class="max-w-6xl mx-auto">
    <label class="block text-sm mb-2 text-[#d8cfae]">Describe what you'd like</label>
    <div class="flex gap-3 mb-6">
      <input id="query" placeholder="e.g. rich red, cherry, chocolate" class="w-full rounded-lg py-3 px-4 text-oldbg font-medium" />
      <button onclick="filterWines()" class="px-5 rounded-lg font-semibold py-3 bg-gold text-oldbg">Search</button>
    </div>
    <aside class="p-4 rounded-lg border border-[#2b261f] shadow-inner mb-10">
      <h3 class="font-medium mb-4 text-[#efe3c8]">Filters</h3>
      <div class="mb-4">
        <label class="block text-sm mb-1">Variety</label>
        <select id="varietySelect" multiple class="w-full p-2 rounded text-oldbg"></select>
      </div>
      <div class="mb-4">
        <label class="block text-sm mb-1">Country</label>
        <select id="countrySelect" multiple class="w-full p-2 rounded text-oldbg"></select>
      </div>
      <div class="mb-2">
        <label class="block text-sm mb-2">Max Price</label>
        <input type="range" id="priceRange" class="w-full" />
        <div class="text-sm mt-1">Up to: $<span id="priceValue"></span></div>
      </div>
    </aside>
    <div id="count" class="text-sm text-[#cfc6ad] mb-3"></div>
    <section id="cards" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></section>
  </section>
<script>
const WINES=[{id:1,name:"Henry Earl 2012 Malbec",region:"Red Mountain",variety:"Malbec",country:"US",price:40,similarity:0.805,explanation:"Rich red wine with cherry/chocolate notes."},{id:2,name:"ChÃ¢teau Beauclaire 2008",region:"Bordeaux",variety:"Cabernet Sauvignon",country:"France",price:120,similarity:0.91,explanation:"Tobacco, blackcurrant and cedar."},{id:3,name:"Santorini Sun 2019 Assyrtiko",region:"Santorini",variety:"Assyrtiko",country:"Greece",price:28,similarity:0.62,explanation:"Mineral-driven with citrus zest."},{id:4,name:"Valle Noble 2018 Malbec",region:"Mendoza",variety:"Malbec",country:"Argentina",price:22,similarity:0.72,explanation:"Ripe plum and spice."}];
const varieties=[...new Set(WINES.map(w=>w.variety))];
const countries=[...new Set(WINES.map(w=>w.country))];
const varietySelect=document.getElementById('varietySelect');
const countrySelect=document.getElementById('countrySelect');
varieties.forEach(v=>varietySelect.innerHTML+=`<option value="${v}">${v}</option>`);
countries.forEach(c=>countrySelect.innerHTML+=`<option value="${c}">${c}</option>`);
const maxPrice=Math.max(...WINES.map(w=>w.price));
priceRange.min=0;priceRange.max=maxPrice;priceRange.value=maxPrice;priceValue.textContent=maxPrice;
priceRange.oninput=()=>priceValue.textContent=priceRange.value;
function filterWines(){
  const q=query.value.toLowerCase();
  const vs=[...varietySelect.selectedOptions].map(o=>o.value);
  const cs=[...countrySelect.selectedOptions].map(o=>o.value);
  const maxP=Number(priceRange.value);
  let out=WINES.filter(w=>{
    if(vs.length&&!vs.includes(w.variety))return false;
    if(cs.length&&!cs.includes(w.country))return false;
    if(w.price>maxP)return false;
    if(q&&!(`${w.name} ${w.region} ${w.variety} ${w.country} ${w.explanation}`.toLowerCase().includes(q)))return false;
    return true;
  }).sort((a,b)=>b.similarity-a.similarity);
  renderCards(out);
}
function renderCards(list){
  const c=document.getElementById('cards');c.innerHTML='';
  count.textContent=`Showing ${list.length} recommendation(s)`;
  if(!list.length){c.innerHTML=`<div class='text-center text-muted col-span-full mt-10'>No matches found.</div>`;return;}
  list.forEach(w=>{c.innerHTML+=`<div class='p-5 rounded-2xl shadow-lg bg-oldcard border border-[#2a241e]'><div class='flex items-start gap-3'><div class='text-3xl'>ğŸ·</div><div><div class='font-serif text-lg text-gold'>${w.name} <span class='text-sm text-muted'>(${w.region})</span></div><div class='mt-2 text-sm text-[#cfc6ad]'><div>ğŸ“ Variety: <span class='font-medium'>${w.variety}</span></div><div>ğŸŒ Country: <span class='font-medium'>${w.country}</span></div><div>ğŸ’° Price: <span class='font-medium'>$${w.price.toFixed(2)}</span></div><div>â­ Similarity: <span class='font-medium'>${w.similarity.toFixed(3)}</span></div></div></div></div><div class='mt-4 text-sm text-[#e9dfc9]'><div class='font-semibold mb-2'>ğŸ’¡ Explanation:</div><p class='text-sm leading-relaxed'>${w.explanation}</p></div></div>`});
}
filterWines();
</script>
</body>
</html>